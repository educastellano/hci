(function(b){var f=b.hci||(b.hci={}),e,d,a,c,g,h;f.qrcamera={};f.qrcamera.init=function(k){var j,n,l,m,i;f.qrcamera.el_video=j=e(k.el_video);f.qrcamera.el_canvas=e(k.el_canvas);f.qrcamera.el_msg=n=e(k.el_msg);c=k.interval||1000;g=k.scale||0.5;if(k.onRead){qrcode.callback=k.onRead}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(navigator.getUserMedia){l={audio:false,video:true};m=function(o){j.src=(window.URL&&window.URL.createObjectURL(o))||o;a=o;f.qrcamera.start_scan()};i=function(o){console.log(o)};navigator.getUserMedia(l,m,i)}else{if(n&&"innerHTML" in n){n.innerHTML="Sorry, native web camera streaming is not supported by this browser..."}}};f.qrcamera.isSupported=function(){return !!navigator.getUserMedia};f.qrcamera.start_scan=function(){if(h){f.qrcamera.stop()}h=setInterval(function(i,j){d()},c)};f.qrcamera.stop_scan=function(){clearInterval(h)};f.qrcamera.stop=function(){f.qrcamera.stop_scan();if(a){a.stop()}};d=function(){var j=f.qrcamera.el_video,i=j.videoWidth*g,k=j.videoHeight*g,m=f.qrcamera.el_canvas.getContext("2d");m.drawImage(j,0,0,i,k);try{qrcode.decode()}catch(l){console.log(l)}};e=function(j){var i;if(typeof j==="string"){j=j[0]==="#"?j.substring(1):j;i=document.getElementById(j)}else{i=j}return i}})(this);