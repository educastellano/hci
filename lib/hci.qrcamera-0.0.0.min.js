(function(a){var c=a.hci||(a.hci={}),b;c.qrcamera={};c.qrcamera.init=function(e){var d,g,f;c.qrcamera.el_video=d=b(e.el_video);c.qrcamera.el_canvas=b(e.el_canvas);c.qrcamera.el_msg=g=b(e.el_msg);c.qrcamera.interval=e.interval||1000;c.qrcamera.scale=e.scale||0.5;if(e.onRead){qrcode.callback=e.onRead}f=function(){var i={audio:false,video:true},j,h;j=function(k){d.src=(window.URL&&window.URL.createObjectURL(k))||k};h=function(k){console.log(k)};if(navigator.getUserMedia){navigator.getUserMedia(i,j,h)}else{if(g&&"innerHTML" in g){g.innerHTML="Sorry, native web camera streaming is not supported by this browser..."}}};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.addEventListener("DOMContentLoaded",f,false)};c.qrcamera.isSupported=function(){return !!navigator.getUserMedia};c.qrcamera.start=function(){if(c.qrcamera.interval_id){c.qrcamera.stop()}c.qrcamera.interval_id=setInterval(function(d,e){c.qrcamera.capture()},c.qrcamera.interval)};c.qrcamera.stop=function(){clearInterval(c.qrcamera.interval_id)};c.qrcamera.capture=function(){var e=c.qrcamera.el_video,d=e.videoWidth*c.qrcamera.scale,f=e.videoHeight*c.qrcamera.scale,i=c.qrcamera.el_canvas.getContext("2d");i.drawImage(e,0,0,d,f);try{qrcode.decode()}catch(g){console.log(g)}};b=function(e){var d;if(typeof e==="string"){e=e[0]==="#"?e.substring(1):e;d=document.getElementById(e)}else{d=e}return d}})(this);