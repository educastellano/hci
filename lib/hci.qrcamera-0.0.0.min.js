(function(b){var f=b.hci||(b.hci={}),e,d,a,c,g,h;f.qrcamera={};f.qrcamera.init=function(j){var i,l,k;f.qrcamera.el_video=i=e(j.el_video);f.qrcamera.el_canvas=e(j.el_canvas);f.qrcamera.el_msg=l=e(j.el_msg);c=j.interval||1000;g=j.scale||0.5;if(j.onRead){qrcode.callback=j.onRead}k=function(){var n={audio:false,video:true},o,m;o=function(p){i.src=(window.URL&&window.URL.createObjectURL(p))||p;a=p;f.qrcamera.start_scan()};m=function(p){console.log(p)};if(navigator.getUserMedia){navigator.getUserMedia(n,o,m)}else{if(l&&"innerHTML" in l){l.innerHTML="Sorry, native web camera streaming is not supported by this browser..."}}};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.addEventListener("DOMContentLoaded",k,false)};f.qrcamera.isSupported=function(){return !!navigator.getUserMedia};f.qrcamera.start_scan=function(){if(h){f.qrcamera.stop()}h=setInterval(function(i,j){d()},c)};f.qrcamera.stop_scan=function(){clearInterval(h)};f.qrcamera.stop=function(){f.qrcamera.stop_scan();a.stop()};d=function(){var j=f.qrcamera.el_video,i=j.videoWidth*g,k=j.videoHeight*g,m=f.qrcamera.el_canvas.getContext("2d");m.drawImage(j,0,0,i,k);try{qrcode.decode()}catch(l){console.log(l)}};e=function(j){var i;if(typeof j==="string"){j=j[0]==="#"?j.substring(1):j;i=document.getElementById(j)}else{i=j}return i}})(this);