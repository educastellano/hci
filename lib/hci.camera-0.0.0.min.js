(function(a){var c=a.hci||(a.hci={}),b;c.camera={};c.camera.init=function(e){var g,f,d,h;c.camera.elVideo=g=b(e.elVideo);c.camera.elCanvas=b(e.elCanvas);c.camera.elMsg=d=b(e.elMsg);c.camera.interval=e.p_inter||1000;c.camera.scale=e.p_scale||0.5;h=function(){var j={audio:false,video:true},k,i;k=function(l){g.src=(window.URL&&window.URL.createObjectURL(l))||l};i=function(l){console.log(l)};if(navigator.getUserMedia){navigator.getUserMedia(j,k,i)}else{if(d&&"innerHTML" in d){d.innerHTML="Sorry, native web camera streaming is not supported by this browser..."}}};if(e.onRead){qrcode.callback=e.onRead}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.addEventListener("DOMContentLoaded",h,false)};c.camera.isSupported=function(){return !!navigator.getUserMedia};c.camera.start=function(){if(c.camera.interval_id){c.camera.stop()}c.camera.interval_id=setInterval(function(d,e){c.camera.capture()},c.camera.interval)};c.camera.stop=function(){clearInterval(c.camera.interval_id)};c.camera.capture=function(){var f=c.camera.elVideo,d=f.videoWidth*c.camera.scale,e=f.videoHeight*c.camera.scale,i=c.camera.elCanvas.getContext("2d");i.drawImage(f,0,0,d,e);try{qrcode.decode()}catch(g){console.log(g)}};b=function(e){var d;if(typeof e==="string"){e=e[0]==="#"?e.substring(1):e;d=document.getElementById(e)}else{d=e}return d}})(this);